<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Waste Management | Register</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body style="font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%); min-height: 100vh; display: flex; justify-content: center; align-items: center; color: #424242; line-height: 1.6;">
    <div class="glass-container" style="width: 80%; max-width: 600px; background: rgba(255, 255, 255, 0.95); border-radius: 24px; backdrop-filter: blur(10px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); overflow: hidden; display: flex; flex-direction: column; min-height: 500px; position: relative; z-index: 1;">
        <div class="form-section" style="flex: 1; padding: 2rem 1.5rem; display: flex; flex-direction: column; justify-content: center;">
            <div class="form-header" style="margin-bottom: 2rem; text-align: center;">
                <h2 class="form-title" style="font-size: 1.5rem; font-weight: 700; color: #000000; margin-bottom: 0.5rem;">Create Account</h2>
                <p class="form-subtitle" style="color: #424242; opacity: 0.7; font-size: 0.85rem;">Start your journey towards zero food waste</p>
            </div>

            <div class="form-container" style="width: 100%; max-width: 300px; margin: 0 auto;">
                <form id="registrationForm">
                    <div class="text-center mt-3">
                        <button type="button" class="btn btn-danger btn-google-signin">
                          <i class='bx bxl-google'></i> Sign up with Google
                        </button>
                    </div>

                    <div class="row">
                        <div class="col-md-6 form-group" style="margin-bottom: 1.25rem; position: relative;">
                            <label for="firstName" class="form-label" style="display: block; margin-bottom: 0.5rem; font-size: 0.85rem; font-weight: 500; color: #212121;">First Name</label>
                            <div class="position-relative">
                                <input type="text" class="form-control" id="firstName" placeholder="John" required style="width: 100%; padding: 0.75rem 0.75rem 0.75rem 2rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 0.85rem; background-color: rgba(245, 245, 245, 0.5);">
                                <i class='bx bx-user input-icon' style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #000000; font-size: 1.2rem;"></i>
                            </div>
                        </div>
                        <div class="col-md-6 form-group" style="margin-bottom: 1.25rem; position: relative;">
                            <label for="lastName" class="form-label" style="display: block; margin-bottom: 0.5rem; font-size: 0.85rem; font-weight: 500; color: #212121;">Last Name</label>
                            <div class="position-relative">
                                <input type="text" class="form-control" id="lastName" placeholder="Doe" required style="width: 100%; padding: 0.75rem 0.75rem 0.75rem 2rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 0.85rem; background-color: rgba(245, 245, 245, 0.5);">
                                <i class='bx bx-user input-icon' style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #000000; font-size: 1.2rem;"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="margin-bottom: 1.25rem; position: relative;">
                        <label for="email" class="form-label" style="display: block; margin-bottom: 0.5rem; font-size: 0.85rem; font-weight: 500; color: #212121;">Email Address</label>
                        <div class="position-relative">
                            <input type="email" class="form-control" id="email" placeholder="your@email.com" required style="width: 100%; padding: 0.75rem 0.75rem 0.75rem 2rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 0.85rem; background-color: rgba(245, 245, 245, 0.5);">
                            <i class='bx bx-envelope input-icon' style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #000000; font-size: 1.2rem;"></i>
                        </div>
                    </div>

                    <div class="form-group" style="margin-bottom: 1.25rem; position: relative;">
                        <label for="username" class="form-label" style="display: block; margin-bottom: 0.5rem; font-size: 0.85rem; font-weight: 500; color: #212121;">Username</label>
                        <div class="position-relative">
                            <input type="text" class="form-control" id="username" placeholder="username" required style="width: 100%; padding: 0.75rem 0.75rem 0.75rem 2rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 0.85rem; background-color: rgba(245, 245, 245, 0.5);">
                            <i class='bx bx-user-circle input-icon' style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #000000; font-size: 1.2rem;"></i>
                        </div>
                    </div>

                    <div class="form-group" style="margin-bottom: 1.25rem; position: relative;">
                        <label for="password" class="form-label" style="display: block; margin-bottom: 0.5rem; font-size: 0.85rem; font-weight: 500; color: #212121;">Password</label>
                        <div class="position-relative">
                            <input type="password" class="form-control" id="password" placeholder="••••••••" required style="width: 100%; padding: 0.75rem 0.75rem 0.75rem 2rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 0.85rem; background-color: rgba(245, 245, 245, 0.5);">
                            <i class='bx bx-lock-alt input-icon' style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #000000; font-size: 1.2rem;"></i>
                        </div>
                    </div>

                    <div class="form-group" style="margin-bottom: 1.25rem; position: relative;">
                        <label for="userType" class="form-label" style="display: block; margin-bottom: 0.5rem; font-size: 0.85rem; font-weight: 500; color: #212121;">I am a</label>
                        <div class="position-relative">
                            <select class="form-control" id="userType" required style="width: 100%; padding: 0.75rem 2rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 0.85rem; background-color: rgba(245, 245, 245, 0.5);">
                                <option value="" disabled selected>Select your role</option>
                                <option value="restaurant">Restaurant Owner</option>
                                <option value="charity">Charity Organization</option>
                                <option value="individual">Individual Contributor</option>
                                <option value="volunteer">Volunteer</option>
                            </select>
                            <i class='bx bx-group input-icon' style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #000000; font-size: 1.2rem;"></i>
                        </div>
                    </div>

                    <button type="submit" class="btn-register" style="width: 100%; padding: 0.75rem; background: linear-gradient(to right, #000000, #000000); border: none; border-radius: 8px; color: white; font-weight: 600; font-size: 0.9rem; cursor: pointer; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); box-shadow: 0 1px 3px rgba(0,0,0,0.12); margin-top: 1rem;">
                        <span>Create Account</span>
                    </button>
                </form>

                <div class="login-link" style="text-align: center; margin-top: 1.5rem; font-size: 0.85rem; color: #424242;">
                    Already have an account? <a href="login.html" style="color: #000000; text-decoration: none; font-weight: 500;">Sign in</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts remain unchanged below -->


    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCAWDb_OtNwl4dAB9wL5F5Ga3K2POBm8jI",
            authDomain: "food-waste-management-3d549.firebaseapp.com",
            projectId: "food-waste-management-3d549",
            storageBucket: "food-waste-management-3d549.firebasestorage.app",
            messagingSenderId: "969339083422",
            appId: "1:969339083422:web:bc4d1b3c7e4525e64cb98f",
            measurementId: "G-V79Z1QP0B3"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getDatabase(app);

        document.getElementById("registrationForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const firstName = document.getElementById("firstName").value;
            const lastName = document.getElementById("lastName").value;
            const email = document.getElementById("email").value;
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;
            const userType = document.getElementById("userType").value;

            createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    return set(ref(db, 'users/' + user.uid), {
                        firstName,
                        lastName,
                        email,
                        username,
                        userType
                    });
                })
                .then(() => {
                    alert("Account created successfully!");
                    window.location.href = "login.html";
                })
                .catch((error) => {
                    alert("Error: " + error.message);
                });
        });

        document.querySelector(".btn-google-signin").addEventListener("click", function () {
            const provider = new GoogleAuthProvider();
            signInWithPopup(auth, provider)
                .then((result) => {
                    const user = result.user;
                    return set(ref(db, 'users/' + user.uid), {
                        firstName: user.displayName?.split(" ")[0] || "",
                        lastName: user.displayName?.split(" ")[1] || "",
                        email: user.email,
                        username: user.email.split("@")[0],
                        userType: "google-user"
                    });
                })
                .then(() => {
                    alert("Signed in with Google successfully!");
                    window.location.href = "index.html";

                })
                .catch((error) => {
                    alert("Google Sign-In Error: " + error.message);
                });
        });
    </script>
</body>
</html>
